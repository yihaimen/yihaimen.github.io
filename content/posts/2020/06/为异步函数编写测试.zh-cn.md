---
title: "如何为异步函数写测试?"
date: 2020-06-29T19:47:44+08:00
author: "易海门"
authorLink: "https://yihaimen.github.io"
description: ""
featuredImage: ""
featuredImagePreview: ""
categories: ["JavaScript"]
tags: ["JavaScript"]
license: "Creative Commons Attribution 4.0 International license"
draft: true
---

## 0x00 引言
在实际的编码过程中，我会遇到很多的异步函数，比如网络请求。它与同步函数的不同点在于它的结果是由回调函数或promise对象返回的，也就是说在调用异步函数之后，不会像同步函数那样，被调用时会挂起，直到操作完成就会得到结果。下面我将分享如何为异步函数编写测试。

## 0x01 让我们开始吧
为了简单起见，需求是：
读取某一文件，并返回该文件的行数。

首先需要解决下边两个问题：
1. 由于异步函数的结果不会立刻返回，所以在测试中需要有一个东西来证明回调函数或promise对象返回了结果；
2. 由于得到响应的时间是未知的，所以我们还得设置一个超时时间。


